<!doctype html>
<html>

<head>
    <title>Javascript Completo</title>
    <meta charset="utf-8">

    <link href="carousel.css" rel="stylesheet">

</head>

<body>

    <main class="content">

        <h1>Javascript Completo</h1>

        <section class="carousel">
            <div class="carousel__inner">
                <div class="carousel__item">
                    <a href=""><img src="images/01.jpg" alt=""></a>
                </div>
                <div class="carousel__item">
                    <a href=""><img src="images/02.jpg" alt=""></a>
                </div>
                <div class="carousel__item">
                    <a href=""><img src="images/03.jpg" alt=""></a>
                </div>
                <div class="carousel__item">
                    <a href=""><img src="images/04.jpg" alt=""></a>
                </div>
            </div>

            <button class="carousel__btn carousel__btn--prev"> &lt; </button>
            <button class="carousel__btn carousel__btn--next"> &gt; </button>

            <ul class="carousel__paginacao"></ul>
        </section>

    </main>

    <script>
        (function() {
            'use strict';
            var $pervButton = document.querySelector(".carousel__btn--prev");
            var $nextButton = document.querySelector(".carousel__btn--next");
            var $carousel = document.querySelector(".carousel");
            var $carouselInner = document.querySelector(".carousel__inner");
            var $carouselItens = document.querySelectorAll(".carousel__item");
            var $carouselPagination = document.querySelector(".carousel__paginacao");
            var $amountBanner = $carouselItens.length;
            var $currentBanner = 0;

            $pervButton.style.display = "block";
            $nextButton.style.display = "block";
            $carousel.style.overflowX = "hidden";

            $pervButton.addEventListener("click", showPrev);
            $nextButton.addEventListener("click", showNext);

            createPagination($amountBanner, $carouselPagination);

            setupNav($currentBanner);

            function createPagination(amountBanner, carouselPagination) {
                for (var index = 0; index < amountBanner; index++) {
                    addLiPagination(index)
                }
            }

            function addLiPagination(index) {
                var $li = document.createElement("li");
                if (index === 0) {
                    $li.className = "atual";
                }
                $li.addEventListener("click", function() {
                    $currentBanner = index;
                    showBanner($currentBanner);
                });

                $carouselPagination.appendChild($li);
            }

            function updatePagination() {
                $carouselPagination.querySelector("li.atual").removeAttribute("class");
                $carouselPagination.querySelectorAll("li")[$currentBanner].className = "atual";
            }

            function showPrev() {
                $currentBanner--;
                showBanner($currentBanner);
            }

            function showNext() {
                $currentBanner++;
                showBanner($currentBanner);
            }

            function setupNav(currentBanner) {
                $pervButton.disabled = !currentBanner > 0;
                $nextButton.disabled = currentBanner === $amountBanner - 1;
            }

            function showBanner(currentBanner) {
                clearIntervalBanner();
                setupNav(currentBanner);

                var carouselItenswidth = getComputedStyle($carouselItens[0]).width;
                carouselItenswidth = parseInt(carouselItenswidth);
                var newPosition = carouselItenswidth * currentBanner * -1;
                $carouselInner.style.transform = "translateX(" + newPosition + "px)";

                updatePagination();
                startIntervalBanner();
            }

            var interval = null;

            function startIntervalBanner() {
                interval = setInterval(function() {
                    $currentBanner++;
                    if ($currentBanner >= $amountBanner) {
                        $currentBanner = 0;
                    }
                    showBanner($currentBanner);
                }, 5000);
            }

            startIntervalBanner();

            function clearIntervalBanner() {
                clearInterval(interval);
            }

        })()
    </script>

</body>

</html>